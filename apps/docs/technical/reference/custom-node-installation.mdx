---
title: "Custom Node Installation"
description: "Install custom nodes in ComfyUI and ComfyStream"
icon: "download"
---

## Install Nodes in ComfyUI
When adding custom nodes, you will need to install them in both `comfyui` and `comfystream` conda environments.

<Info>Since ComfyUI is started in the `comfyui` environment, typically you can just install nodes via  **ComfyUI-Manager** and they will be installed in ComfyUI. In this case you only need to [Install nodes for ComfyStream](#install-nodes-in-comfystream)</Info>

1. Navigate to the custom node directory and activate the `comfyui` environment:
<Tabs>
    <Tab title="RunPod (Linux)">
        ```bash
        conda activate comfyui
        cd /workspace/comfyRealtime/ComfyUI/custom_nodes
        ```
    </Tab>

    <Tab title="Local (Windows)">
        <Note>Many custom nodes such as StreamDiffusion and SAM2-Realtime require **CUDA** and **torch** to be installed</Note>
        Ensure the system prerequisites are installed before adding GPU-accelerated nodes on Windows:
        <Expandable title="System Prerequisites">
        __NVIDIA CUDA Toolkit__
        1. Install [CUDA Toolkit](https://developer.nvidia.com/cuda-downloads?target_os=Windows&target_arch=x86_64&target_version=11&target_type=exe_network)
        2. Set `CUDA_HOME` to your installation directory for CUDA. Example: `C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4` <Note>Update CUDA version folder name as needed</Note>

        __Visual C++ Build Tools__
        1. Install [Visual C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/). From Visual Studio Installer, click **Individual Components**, then select **C++ CMake Build Tools**.
        2. Ensure **C++ Build Tools** are in the system PATH by adding `C:\Program Files (x86)\Microsoft Visual Studio\2022\BuildTools\VC\Tools\MSVC\14.42.34433\bin\HostX86\x64\` (or equivalent) to your system `PATH` variable
        </Expandable>

        ```bash
        conda activate comfyui
        cd "$env:HOMEPATH/comfyRealtime/ComfyUI/custom_nodes"
        ```
    </Tab>
</Tabs>

2. Clone the node repository:

```bash
conda activate comfyui
git clone https://github.com/ryanontheinside/ComfyUI_RealTimeNodes.git
cd ComfyUI_RealTimeNodes
```

3. Activate the `comfyui` environment and install requirements:

```bash
conda activate comfyui
pip install -r requirements.txt
conda deactivate
```

4. Proceed to [Install nodes for ComfyStream](#install-nodes-in-comfystream) each time you add a new node to ComfyUI.


## Install Nodes in ComfyStream
After adding a custom node to ComfyUI, you must also install the dependencies in the `comfystream` environment:

1. Start a new terminal session and activate `comfystream`:

```bash
conda activate comfystream
```

2. Install the custom node requirements by running the `install.py` script with the `--workspace` flag pointing to the ComfyUI workspace directory:
<Tabs>
    <Tab title="RunPod (Linux)">
    ```bash
    cd /workspace/comfyRealtime/ComfyStream
    python install.py --workspace ../ComfyUI
    ```
    </Tab>

    <Tab title="Local (Windows)">
    ```bash
    cd "$env:HOMEPATH/comfyRealtime/ComfyStream"
    python install.py --workspace ..\ComfyUI
    ```
    </Tab>
</Tabs>

## Testing the Custom Node
1. Start ComfyUI and ComfyStream to see the new node in action:
- From the **ComfyUI** terminal:
```bash
python main.py --listen
```
- From the **ComfyStream** terminal:
```bash
python server/app.py --workspace ../ComfyUI --media-ports=5678 --host=0.0.0.0 --port 8889
```

2. Download the sample workflow json file for motion control [examples/motioncontrol.json](https://raw.githubusercontent.com/ryanontheinside/ComfyUI_RealTimeNodes/main/examples/motioncontrol.json)
3. From ComfyUI, go to **Workflow** > **Open** and select *motioncontrol.json* to load the workflow.
4. Click **Upload** to add an image to the **LoadImage** node and click **Queue** to run the workflow.
<Info>If the node is installed correctly, you will see the output in the **LoadImage** node.</Info> 

5. Follow [Run ComfyStream UI](./local-testing-comfystream-ui) to start a live stream 

<Note>
ComfyUI_RealTimeNodes is a collection of over 100 custom nodes for ComfyUI. These nodes can be used with ComfyStream to create custom workflows for real-time video processing.
</Note>

# Installing Additional Livepeer Custom Nodes

A complete list of already supported nodes can be found at [Available ComfyUI Nodes](../../technical/reference/available-nodes)

Installation steps for our most powerful nodes can be found at [Installing Nodes](../../technical/reference/nodes)

