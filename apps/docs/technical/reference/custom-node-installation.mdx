---
title: "Custom Node Installation"
description: "install custom nodes in ComfyUI and ComfyStream"
icon: "code"
---

## Install Custom Nodes into ComfyUI
When adding custom nodes, you will need to install them in both `comfyui` and `comfystream` conda environments. 

<Info>Since ComfyUI is started in the `comfyui` environment, you can just install nodes via the ComfyUI-Manager and they will be installed in ComfyUI. In this case you only need to [Install nodes for ComfyStream](#install-nodes-for-comfystream) </Info>

1. Navigate to the custom node directory and activate the `comfyui` environment:
<Tabs>
    <Tab title="RunPod (Linux)">
        ```bash
        conda activate comfyui
        cd /workspace/comfyRealtime/ComfyUI/custom_nodes
        ```
    </Tab>

    <Tab title="Local (Windows)">
        ```bash
        conda activate comfyui
        cd "$env:HOMEPATH/comfyRealtime/ComfyUI/custom_nodes"
        ```
    </Tab>
</Tabs>

2. Clone and install requirements. For example, to install the **SAM2-Realtime** node:
```bash
git clone https://github.com/pschroedl/ComfyUI-SAM2-Realtime.git
cd ComfyUI-SAM2-Realtime
pip install -r requirements.txt
conda deactivate
```

<Info> A complete list of already supported nodes can be found at [ComfyUI Custom Nodes](../../technical/reference/available-nodes)</Info>

## Install nodes for ComfyStream
After adding a custom node to ComfyUI, you must also install the dependencies in the `comfystream` environment:

4. Start a new terminal session and activate `comfystream`:

```bash
conda activate comfystream
```

5. Navigate to the **ComfyStream** directory:
<Tabs>
    <Tab title="RunPod (Linux)">
    ```bash
    cd /workspace/comfyRealtime/ComfyStream
    ```
    </Tab>

    <Tab title="Local (Windows)">
    ```bash
    cd "$env:HOMEPATH/comfyRealtime/ComfyStream"
    ```
    </Tab>
</Tabs>

6. Install the custom node dependencies by running the `install.py` script with the `--workspace` flag pointing to the ComfyUI workspace directory:
```bash
python install.py --workspace ../ComfyUI
```

## Test the custom node
1. Start ComfyUI and ComfyStream to see the new node in action:
- From the **ComfyUI** terminal:
```bash
python main.py --listen
```
- From the **ComfyStream** terminal:
```bash
python server/app.py --workspace ../ComfyUI --media-ports=5678 --host=0.0.0.0 --port 8889
```

2. Download the sample workflow json file for SAM2 [examples/SAM2-Realtime-Example.json](https://github.com/pschroedl/ComfyUI-SAM2-Realtime/blob/main/examples/SAM2-Realtime-Example.json) and open the workflow in ComfyUI
3. Follow [Run ComfyStream UI](./local-testing-comfystream-ui) to start a live stream 


# Installing Additional Livepeer Custom Nodes

### StreamDiffusion
This node is useful for styling videos with a diffusion effect. It can be combined with other nodes to create masked effects.
<Tabs>
    <Tab title="RunPod (Linux)">
    ```bash
    cd /workspace/comfyRealtime/ComfyUI/custom_nodes
    ```
    </Tab>

    <Tab title="Local (Windows)">
    ```bash
    cd "$env:HOMEPATH/comfyRealtime/ComfyUI/custom_nodes"
    ```
    </Tab>
</Tabs>

```bash
conda activate comfyui
git clone https://github.com/pschroedl/ComfyUI-StreamDiffusion.git
cd ComfyUI-StreamDiffusion
git checkout 628c9f81abdc4f9b0207bcb556f35a8cbc2d7319
pip install -r requirements.txt
conda deactivate
```

### SAM2-Realtime

This node is useful for tracking an object given positive and negative prompt coordinates. It can be combined with Florence2 and other object detection nodes.

Clone the node and install dependencies
<Tabs>
    <Tab title="RunPod (Linux)">
    ```bash
    cd /workspace/comfyRealtime/ComfyUI/custom_nodes
    ```
    </Tab>

    <Tab title="Local (Windows)">
    ```bash
    cd "$env:HOMEPATH/comfyRealtime/ComfyUI/custom_nodes"
    ```
    </Tab>
</Tabs>

```bash
conda activate comfyui
git clone https://github.com/pschroedl/ComfyUI-SAM2-Realtime.git
cd ComfyUI-SAM2-Realtime
pip install -r requirements.txt
conda deactivate
```

<Note>
Remember to [Install nodes for ComfyStream](#install-nodes-for-comfystream) each time you add a new node to ComfyUI
</Note>